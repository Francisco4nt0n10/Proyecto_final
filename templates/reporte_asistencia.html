{% extends "base.html" %}
{% block content %}

<h2>Reporte de Asistencia</h2>

<form method="GET">

    <label>Trabajador:</label>
    <select name="trabajador">
        <option value="">Todos</option>
        {% for t in trabajadores %}
        <option value="{{ t.id }}">{{ t.nombre }} {{ t.apellido_paterno }}</option>
        {% endfor %}
    </select>

    <label>Unidad Administrativa:</label>
    <select name="unidad">
        <option value="">Todas</option>
        {% for u in unidades %}
        <option value="{{ u.id_unidad }}">{{ u.nombre }}</option>
        {% endfor %}
    </select>

    <label>Fecha Inicio:</label>
    <input type="date" name="fecha_inicio">

    <label>Fecha Fin:</label>
    <input type="date" name="fecha_fin">

    <button type="submit">Filtrar</button>
    <button type="submit" name="export_csv" value="1">Exportar CSV</button>
</form>

<hr>

<table border="1">
    <tr>
        <th>Trabajador</th>
        <th>Fecha</th>
        <th>Entrada</th>
        <th>Salida</th>
        <th>Estatus</th>
    </tr>

    {% for r in registros %}
    <tr>
        <td>{{ r.id_trabajador }}</td>
        <td>{{ r.fecha }}</td>
        <td>{{ r.hora_entrada }}</td>
        <td>{{ r.hora_salida }}</td>
        <td>{{ r.estatus }}</td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
