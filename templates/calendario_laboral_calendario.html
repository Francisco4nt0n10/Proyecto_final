{% extends "base.html" %}

{% block title %}Calendario mensual{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto mt-10 bg-white p-6 rounded-xl shadow-lg border border-gray-200">

    <div class="flex items-center justify-between mb-4">
        <h1 class="text-2xl font-bold text-indigo-700">
            Calendario laboral - {{ nombre_mes }} {{ anio }}
        </h1>
    </div>

    <div class="flex items-center justify-between mb-6">
        <a href="{% url 'calendario_laboral_calendar' anio=anio_anterior mes=mes_anterior %}"
           class="inline-flex items-center px-3 py-1.5 text-sm bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition">
            &laquo; Mes anterior
        </a>

        <a href="{% url 'calendario_laboral_calendar' anio=anio_siguiente mes=mes_siguiente %}"
           class="inline-flex items-center px-3 py-1.5 text-sm bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition">
            Mes siguiente &raquo;
        </a>
    </div>

    <div class="overflow-x-auto">
        <table class="w-full border-collapse text-center text-sm">
            <thead>
                <tr class="bg-gray-800 text-white">
                    <th class="p-2 border border-gray-700">Lun</th>
                    <th class="p-2 border border-gray-700">Mar</th>
                    <th class="p-2 border border-gray-700">Mié</th>
                    <th class="p-2 border border-gray-700">Jue</th>
                    <th class="p-2 border border-gray-700">Vie</th>
                    <th class="p-2 border border-gray-700">Sáb</th>
                    <th class="p-2 border border-gray-700">Dom</th>
                </tr>
            </thead>
            <tbody>
                {% for semana in matrix_semanas %}
                    <tr>
                        {% for dia in semana %}
                            {% if dia %}
                                {% with registro=dias_dict|default_if_none:''|dict_get:dia %}
                                <td class="h-24 align-top p-2 border 
                                           {% if registro and registro.es_inhabil %}
                                               bg-red-100 border-red-300 text-red-700
                                           {% else %}
                                               bg-white
                                           {% endif %}">
                                    <div class="font-semibold text-gray-800 mb-1">
                                        {{ dia.day }}
                                    </div>
                                    {% if registro %}
                                        <div class="text-xs text-gray-600">
                                            {{ registro.descripcion }}
                                        </div>
                                    {% endif %}
                                </td>
                                {% endwith %}
                            {% else %}
                                <td class="h-24 border bg-gray-50"></td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="mt-6">
        <a href="{% url 'calendario_laboral_list' %}"
           class="inline-flex px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition">
            Volver al listado
        </a>
    </div>

</div>
{% endblock %}